<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Airport Dashboard 3.0</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="dashboard-container">
    <header>
      <div class="header-row">
        <h1>Airport Dashboard 3.0</h1>
        <div class="display-mode-row">
          <label for="display-mode-select">Display Mode:</label>
          <select id="display-mode-select">
            <option value="monitor">Monitor / Small TV</option>
            <option value="tv">Large TV / Projector</option>
          </select>
        </div>
      </div>
      <div class="airport-select-row">
        <label for="main-airport-select">Airport:</label>
        <select id="main-airport-select"></select>
      </div>
      <div class="issue-link-row">
        <a href="https://github.com/G34hWeatherSpotter/airport-dashboard-3.0/issues" target="_blank" rel="noopener" class="issue-link">
          üêû Submit an Issue or Suggestion
        </a>
      </div>
      <button id="admin-login-btn" class="admin-btn">Admin Login</button>
      <button id="admin-logout-btn" class="admin-btn" style="display:none;">Admin Logout</button>
    </header>

    <div id="announcement-bar" class="announcement-bar" style="display:none;"></div>

    <main class="main-area">
      <div class="main-large-tiles">
        <section class="dashboard-card main-tile" id="radar-card">
          <h2>Flight Radar Map</h2>
          <iframe
            id="radar-frame"
            title="ADSBexchange Globe"
            src="https://globe.adsbexchange.com/"
            width="100%"
            height="480"
            style="border:0; border-radius:12px;"
            allowfullscreen>
          </iframe>
        </section>
        <section class="dashboard-card main-tile" id="webcam-card">
          <h2>Live Airport Webcam</h2>
          <form id="webcam-search-form" class="webcam-search-form">
            <input type="text" id="webcam-location-input" placeholder="Search airport (name, ICAO, or IATA)" autocomplete="off">
            <button type="submit">Search</button>
            <button type="button" id="reset-webcam-btn" title="Reset to selected airport">&#x21bb;</button>
          </form>
          <form id="webcam-custom-link-form" class="webcam-search-form" style="margin-top:0.3em;">
            <input type="text" id="webcam-custom-link-input" placeholder="Paste livestream URL (YouTube, Twitch, etc)">
            <button type="submit">Set Stream</button>
            <button type="button" id="reset-custom-link-btn" title="Reset to airport/auto">&#x21bb;</button>
          </form>
          <div id="webcam-loading" style="display:none;">Loading...</div>
          <div id="webcam-error" style="color:red;"></div>
          <iframe id="webcam-frame" width="100%" height="320" frameborder="0" allowfullscreen></iframe>
        </section>
      </div>
      <div class="info-cards-area">
        <div class="info-cards-tabs">
          <button class="tab-btn active" data-tab="weather-card">Weather</button>
          <button class="tab-btn" data-tab="metar-taf-card">METAR/TAF</button>
          <button class="tab-btn" data-tab="sun-card">Sun/Time</button>
        </div>
        <section class="dashboard-card info-card" id="weather-card">
          <h2>Current Weather</h2>
          <form id="weather-search-form" class="weather-search-form">
            <input type="text" id="weather-location-input" placeholder="Search location (city, ICAO, IATA, lat,lon)" autocomplete="off">
            <button type="submit">Search</button>
            <button type="button" id="reset-weather-btn" title="Reset to selected airport">&#x21bb;</button>
          </form>
          <div id="weather-loading" style="display:none;">Loading...</div>
          <div id="weather-error" style="color:red;"></div>
          <div id="weather-result"></div>
        </section>
        <section class="dashboard-card info-card" id="metar-taf-card" style="display:none;">
          <h2>METAR &amp; TAF</h2>
          <div id="metar-loading" style="display:none;">Loading...</div>
          <div id="metar-error" style="color:red;"></div>
          <div id="metar-result"></div>
        </section>
        <section class="dashboard-card info-card" id="sun-card" style="display:none;">
          <h2>Sunrise, Sunset &amp; Local Time</h2>
          <div id="sun-loading" style="display:none;">Loading...</div>
          <div id="sun-error" style="color:red;"></div>
          <div id="sun-result"></div>
        </section>
      </div>
      
      <!-- Admin Panel -->
      <section id="admin-panel" class="dashboard-card" style="display:none; margin-top:1.5em; background:#fffbe7;">
        <h2>Admin Panel</h2>
        <div class="admin-section">
          <h3>Announcement Bar</h3>
          <input type="text" id="admin-announcement-input" placeholder="Announcement text..." style="width:80%">
          <button id="admin-announcement-set">Set Announcement</button>
          <button id="admin-announcement-clear">Clear</button>
        </div>
        <hr>
        <div class="admin-section">
          <h3>Edit Airports &amp; Webcams</h3>
          <table id="admin-airport-table">
            <thead><tr>
              <th>Name</th>
              <th>ICAO</th>
              <th>IATA</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Webcam Embed URL</th>
              <th>Remove</th>
            </tr></thead>
            <tbody></tbody>
          </table>
          <div style="margin-top:0.5em;">
            <input type="text" id="admin-new-name" placeholder="New Name" style="width:18%">
            <input type="text" id="admin-new-icao" placeholder="ICAO" style="width:8%">
            <input type="text" id="admin-new-iata" placeholder="IATA" style="width:8%">
            <input type="number" id="admin-new-lat" placeholder="Lat" style="width:10%">
            <input type="number" id="admin-new-lon" placeholder="Lon" style="width:10%">
            <input type="text" id="admin-new-webcam" placeholder="Webcam Embed URL" style="width:23%">
            <button id="admin-add-airport">Add Airport</button>
          </div>
        </div>
        <hr>
        <div class="admin-section">
          <h3>Set Default Stream</h3>
          <input type="text" id="admin-default-stream-input" placeholder="Paste livestream embed URL (YouTube, Twitch...)">
          <button id="admin-default-stream-set">Set Stream as Default</button>
          <button id="admin-default-stream-clear">Clear</button>
        </div>
      </section>
      <!-- End Admin Panel -->
    </main>
  </div>
  <div id="admin-login-modal" class="modal" style="display:none;">
    <div class="modal-content">
      <span id="admin-modal-close" class="modal-close">&times;</span>
      <h2>Admin Login</h2>
      <form id="admin-login-form">
        <input type="password" id="admin-password-input" placeholder="Enter admin password">
        <button type="submit">Login</button>
      </form>
      <div id="admin-login-error" style="color:red; margin-top:0.5em;"></div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
